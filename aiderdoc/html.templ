package aiderdoc

templ EntriesTemplate(articles []Article) {
	<!DOCTYPE html>
	<html lang="en">
		@head()
		<body>
			for _, article := range articles {
				@articleTemplate(article)
			}
		</body>
	</html>
}

templ head() {
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<title>Aider Chronicle</title>
		<style>
			body {
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
				line-height: 1.4;
				max-width: 1000px;
				margin: 0 auto;
				padding: 1rem;
				color: #333;
				display: grid;
				grid-template-columns: 180px 1fr;
				gap: 2rem;
			}
			.article {
				margin-bottom: 2rem;
			}
			.section {
				margin-bottom: 1rem;
			}
			.entry {
				margin-bottom: 0.5rem;
			}
			.timestamp {
				font-size: 0.8rem;
				color: #666;
				text-align: right;
				padding-right: 1rem;
			}
			.content {
				white-space: pre-wrap;
			}
			.date {
				font-weight: bold;
				margin-bottom: 0.5rem;
			}
		</style>
	</head>
}

templ articleTemplate(article Article) {
	<div class="timestamp">
		@timestampColumn(article)
	</div>
	<div class="article">
		@articleContent(article)
	</div>
}

templ timestampColumn(article Article) {
	<div class="date">{ article.StartTime.Format("Monday, 2 January, 2006") }</div>
	for _, section := range article.Sections {
		<div class="timestamp">{ section.StartTime.Format("15:04:05") }</div>
	}
}

templ articleContent(article Article) {
	for _, section := range article.Sections {
		@sectionTemplate(section)
	}
}

templ sectionTemplate(section Section) {
	<div class="section">
		for _, entry := range section.Entries {
			@entryTemplate(entry)
		}
	</div>
}

templ entryTemplate(entry Entry) {
	<div class="entry">
		<div class="content">{ entry.Content }</div>
	</div>
}
